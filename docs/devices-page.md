# Devices page

## Введение

Все взаимодействие с устройствами подключенными к контроллеру происходит в рамках протокола [MQTT](https://wirenboard.com/wiki/index.php/MQTT).

MQTT позволяет:

- Получить мета информацию о устройствах.
- Получить мета информацию о контролах.
- Получить текущее состояние контролов.
- Изменить состояние контрола.

Hyperion прослушивать все MQTT сообщения, и формирует из них объект [HyperionDevice](../src/domain/hyperion-device.ts) на уровне приложения.

Эти объекты используются для:

- Хранения текущего состояния устройства в БД.
- Ведения истории изменений состояний контролов.
- Удобного представления устройства на уровне приложения.
- Передачи данных на FE при помощи слоя [GraphQL](../src/interfaces/http/graphql/schema.graphql#L142), и типа `Device`.
- Создания макросов.

FE коммуницирует только с [GraphQL](../src/interfaces/http/graphql/schema.graphql#L229), и не знает каким образом происходит преобразование из MQTT сообщений в [HyperionDevice](../src/domain/hyperion-device.ts), и обратно.

Актуальные данные FE получается из подписки [GraphQL Subscription](../src/interfaces/http/graphql/schema.graphql#L260).

На странице устройств мы видим навигацию, фильтр по устройствам, список устройств в виде grid системы, и пагинацию по страницам, если это нужно.

Все данные на этой странице подтягиваются в реальном времени, через `GraphQL subscription`, по верх `web socket` соединения.

## Функциональное назначение

В рамках понятий проекта, устройства и контролы wirenboard это некие абстрактные вещи. Например устройство `wb-msw-v3_123`, контрол `Air Quality (VOC)`, или устройство `0x00158d00096964ea`, контрол `temperature` и так далее.

Но в рамках понятия проекта "умного" дома мы оперируем понятиями `качество воздуха в спальне`, `температура поверхности пола в кабинете`.

Для того, чтобы связать абстрактные идентификаторы устройств и контролов с понятиями из проекта "умного" дома, необходимо в объекты [HyperionDevice](../src/domain/hyperion-device.ts), добавить информацию в `markup` и `labels` о том, что это устройство и его контрол(ы) означают, в рамках проекта "умного" дома.

Но если мы будем `хардкодить` эти связи для каждой инсталляции мы получим `легаси` решение сразу же после того как оно будет запущено. Так как для изменения какого либо параметра придется прибегать к услугам программиста.

Для решения этой задачи, нам требуется GUI который позволит размечать устройства без вмешательство в код.

После того как все устройства и их контролы размечены появляется возможность конфигурировать [макросы](./macros-page.md).

## Навигация

## Фильтр

## Устройства

## Пагинация
